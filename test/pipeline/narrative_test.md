# Narrative Layer Test

## version 1

Scenario Controller에서 나온 `event_description`과 `night_description` 를 기본적으로 합치는 1차 Rule-Based, 이들을 소설 형식으로 풀어쓰는 2차 LM-Based(EXAONE-3.5-7.8B-Instruct)로 구현.

소설을 쓰기에 벌어진 이벤트에 대한 설명 외에 에피소드의 기본 톤 등을 위해 `assets`를 받지만, 값으로 이루어진 npc들의 스탯 변화 등을 소설로 변환하기에 애매한 부분이 있다고 판단, `world_state`를 제외.

### Input

테스트 1: 이벤트만 있는 경우 (밤 변화 관찰 안 됨)

```python
    print(f"\n[2] 이벤트만 렌더링 (is_observed=False)")
    print("-" * 40)

    event_desc = [
        "피해자 가족이 고개를 끄덕인다. \"그랬어요...\"",
        "당신은 메모를 확인한다."
    ]
    night_desc = [
        "밤이 깊어간다. 진실과 조작의 경계가 흐려진다.",
        "...누군가 당신의 로그를 확인했다."
    ]
```

### Output: dialogue

```python
어둠 속에서 희미한 불빛이 떨리는 듯한 느낌으로 방을 비추고 있었다. 메모를 꽉 쥐고 있던 손가락이 떨리는 
것을 느꼈다. 그 위에 적힌 글자들이 눈앞에서 춤추는 듯했다 – 증거, 증언, 그리고 모든 것이 맞아떨어지는 
퍼즐 조각들.

문이 조용히 열리며 피해자 가족의 모습이 들어왔다. 그들의 표정은 이미 모든 것을 이해하고 있다는 듯, 
고요한 동의를 담은 눈빛으로 나를 바라보았다. 그 순간, "그랬어요..."라는 한마디가 공기 중을 가르며 울려 
퍼졌다. 목소리는 평온했지만, 그 뒤에 숨겨진 무게감은 압도적이었다. 마치 시간이 멈춘 듯한 정적이 흘렀고, 
그 순간 나는 세상과 단절된 듯한 느낌에 사로잡혔다.

메모를 다시 한번 스캔하며, 각 단어 하나하나가 칼날처럼 날카롭게 뇌리에 박혔다. 증거는 이미 나를 포위하고 
있었고, 그들의 인정은 내 운명을 결정짓는 쐐기돌이었다. 숨이 막히는 긴장감 속에서, 나는 이 모든 것이 
어떻게 흘러갔는지, 그리고 왜 이렇게 되었는지에 대한 마지막 조각을 깨달았다. 이제 뒤로 물러설 곳은 없었다. 
모든 진실이 곧 드러날 순간이 다가오고 있었다.


```

### Input	

테스트 2: 이벤트와 밤 변화 모두 렌더링 (is_observed=True)

```python
    print(f"\n[3] 이벤트 + 밤 변화 렌더링 (is_observed=True)")
    print("-" * 40)

    dialogue_observed = narrative.render(
        event_description=event_desc,
        night_description=night_desc,
        assets=assets,
        is_observed=True  # 밤 변화 관찰됨
    )
    print(dialogue_observed)

```

### Output: dialogue

```python
어둠이 창밖을 감싸며 실내를 깊은 그림자로 물들였다. 벽에 걸린 시계의 바늘은 자정을 향해 천천히 움직였고, 
밤의 깊어짐과 함께 진실의 모호함도 점점 더 흐려졌다. 내 손은 떨리는 손가락으로 메모를 펼쳤다. 그 위에 적힌 
글씨는 마치 나를 바라보는 듯 차갑게 느껴졌다.

피해자 가족의 말이 여전히 귀에 맴돌았다. "그랬어요..." 그 단순한 대답이 마치 모든 의문을 정리하는 결말 
같았다. 그러나 그 순간, 컴퓨터 화면이 깜빡였다. 누군가가 내 온라인 활동을 추적하고 있었음을 알려주는 경고 
메시지였다. 로그 확인 알림이 울리며, 나의 심장은 더욱 빠르게 뛰었다.

밤이 깊어질수록 주변은 조용해졌고, 그 조용함이 오히려 더 큰 공포를 불러일으켰다. 창문 너머로 희미한 별빛이 
비추는 순간, 나는 내 자신이 처한 상황의 무게를 체감했다. 이 모든 것이 진실일까, 아니면 누군가에 의해 
정교하게 짜여진 연극일까?

메모를 닫으려는 순간, 또 다른 메시지가 나타났다. 간결하면서도 위협적인 문구였다: "당신의 마지막 순간을 
기억하세요." 그 순간, 공기 중에 긴장감이 맴돌았다. 밤의 변화와 함께 시간은 멈추는 듯했고, 진실과 조작의 
경계는 더욱 모호해져 갔다. 나는 숨을 크게 들이마시며, 주변의 모든 소리가 증폭되는 듯한 착각에 빠졌다. 
누가 내 뒤를 밟고 있었던가? 그리고 누가 이 모든 것을 조종하고 있는 걸까?

그 순간, 나는 단지 한 걸음 더 깊은 어둠 속으로 빨려 들어가고 있음을 깨달았다.

```

### Input

테스트 3: 여러 이벤트 블록 + 밤 변화 관찰됨

```python
    print(f"\n[4] 여러 이벤트 블록 + 밤 변화")
    print("-" * 40)

    multiple_events = [
        "당신은 증거를 분석한다.",
        "패턴이 보이기 시작한다.",
        "모든 것이 한 곳을 가리킨다."
    ]

    dialogue_multiple = narrative.render(
        event_description=multiple_events,
        night_description=["시간이 흘러간다."],
        assets=assets,
        is_observed=True
    )
    print(dialogue_multiple)

```

### Output: dialogue

```python
### 밤의 그림자 속에서

시계 바늘이 천천히 움직이며 밤의 깊은 속으로 빠져들었다. 창밖으로 흘러내리는 어둠 속에서 나는 낡은 책상 앞에 앉아, 희미한 조명 아래 흩어진 증거들을 면밀히 분석하고 있었다. 종이 위에 흩어진 단서들은 처음엔 무작위처럼 보였지만, 시간이 흐를수록 그들 사이의 미묘한 연결고리가 점차 선명해지기 시작했다.

**증거들 사이의 틈**  
각 사건마다 남겨진 흔적들은 다양했다: 암호화된 메시지, 낯선 기호, 그리고 희미한 지문. 하지만 공통점이 하나둘 드러나기 시작했다. 모든 증거는 특정 패턴을 따랐다—일정한 간격으로 반복되는 숫자, 특정 날짜와 시간의 일치, 그리고 모두가 한 명의 이름을 가리키고 있었다: **에드워드 블랙우드**.

**그림자 속의 패턴**  
에드워드 블랙우드의 이름이 떠오르며, 나는 마치 거대한 퍼즐의 마지막 조각을 맞추는 듯한 느낌에 사로잡혔다. 그의 이름이 모든 사건의 중심에 서 있다는 사실은 압도적이었다. 그의 흔적이 마치 어둠 속에서 빛나는 등불처럼, 모든 사건을 한 지점으로 모아들였다.

**시간의 흐름과 압박감**  
밤이 깊어질수록 압박감은 커져만 갔다. 시간이 흘러가는 속도는 점점 더 느려져 보였다. 창밖의 시계탑이 울리는 소리는 멀리서 들려오는 긴박한 경고처럼 들렸다. 각 순간마다 증거들이 더욱 명확해지는 동시에, 내 주변의 모든 것이 에드워드 블랙우드와의 연결고리를 더욱 굳게 다지는 듯했다.

**결정의 순간**  
어둠 속에서 희미하게 빛나는 증거들 사이로, 나는 마침내 결론에 도달했다. 모든 것이 한 곳을 가리키는 이 순간, 나는 내 손에 들린 진실의 열쇠를 꽉 쥐었다. 밤의 그림자가 더욱 짙어지는 가운데, 나는 이제 에드워드 블랙우드의 진실을 밝히는 마지막 단계에 서 있었다. 시간은 멈추지 않았고, 그의 그림자는 점점 더 가까워져 왔다.

```
